{% extends "base.html" %}
{% load static %}

{% block title %}Reviews{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'reviews/reviews.css' %}">
{% endblock %}

{% block content %}

<header class="page-header">
  <h1 class="page-title">Customer Reviews</h1>
  <p class="page-subtitle">See what people are saying about our bakery favorites üç∞</p>
</header>

<section class="reviews-layout">

  <aside class="review-form">
    <h2 class="form-title">Leave a Review</h2>
    <p class="form-subtitle">Tell us what you tried and how it was!</p>
  
    <form method="post">
      {% csrf_token %}

      <label class="label" for="{{ form.username.id_for_label }}">Your Name</label>
      {{ form.username }}

      <label class="label" for="{{ form.product.id_for_label }}">Product</label>
      {{ form.product }}

      <label class="label" for="{{ form.rating.id_for_label }}">Rating</label>
      {{ form.rating }}

      <label class="label" for="{{ form.comment.id_for_label }}">Your Review</label>
      {{ form.comment }}

      <button class="btn" type="submit">Submit Review</button>
    </form>
  </aside>

  <div class="reviews-list">

    {% for review in reviews %}
    <article class="review-card">
      <div class="review-top">
        <div>
          <h3 class="review-product">{{ review.product.name }}</h3>
          <p class="review-name">by {{ review.username }}</p>
        </div>

        <div class="stars" aria-label="{{ review.rating }} star rating">
          {% for i in "12345" %}
            {% if forloop.counter <= review.rating %}
              ‚òÖ
            {% else %}
              ‚òÜ
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <p class="review-text">
        {{ review.comment }}
      </p>
    </article>
    {% empty %}
      <p class="no-reviews">No reviews yet ‚Äî be the first to leave one!</p>
    {% endfor %}

  </div>

</section>

{% endblock %}
